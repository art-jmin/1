<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë…¼ìˆ  ë‹µì•ˆ ì œì¶œ</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 700px; margin: auto; }
    input, textarea { width: 100%; padding: 10px; margin-bottom: 15px; font-size: 16px; box-sizing: border-box; }
    button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
    .char-count { text-align: right; font-size: 14px; color: #555; margin-top: -10px; margin-bottom: 15px; }
  </style>
  <script>
    function preventPaste(event) {
      event.preventDefault();
      alert("ë¶™ì—¬ë„£ê¸°ëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
    }

    function updateCharCount() {
      const textarea = document.getElementById("answer");
      const countDisplay = document.getElementById("charCount");
      countDisplay.textContent = `í˜„ì¬ ê¸€ì ìˆ˜: ${textarea.value.length}ì`;
    }

    function submitForm() {
      const studentId = document.getElementById('studentId').value.trim();
      const studentName = document.getElementById('studentName').value.trim();
      const answer = document.getElementById('answer').value.trim();

      if (!studentId || !studentName || !answer) {
        alert('ëª¨ë“  í•­ëª©ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.');
        return;
      }

      const scriptURL = 'https://script.google.com/macros/s/AKfycbwsCgRNlhaP3j5AN7wDnaafB74_iGlQQoI4caD0aku0sGZizFMRDb4WFDMY_Davj-W3Jw/exec';

      fetch(scriptURL, {
        method: 'POST',
        mode: 'no-cors',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ studentId, studentName, answer })
      }).then(() => {
        alert('ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤!');
        document.getElementById('studentId').value = '';
        document.getElementById('studentName').value = '';
        document.getElementById('answer').value = '';
        updateCharCount();
      }).catch(err => {
        alert('ì œì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        console.error(err);
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("answer").addEventListener("paste", preventPaste);
      document.addEventListener("keydown", event => {
        if (event.ctrlKey && (event.key === "v" || event.key === "V")) {
          event.preventDefault();
          alert("Ctrl+VëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        }
      });
      document.addEventListener("contextmenu", event => event.preventDefault());
      updateCharCount();
    });
  </script>
</head>
<body>
  <h2>ğŸ“ ë…¼ìˆ  ë‹µì•ˆ ì œì¶œ</h2>

  <label for="studentId">1. í•™ë²ˆ</label>
  <input type="text" id="studentId" name="studentId" required>

  <label for="studentName">2. ì´ë¦„</label>
  <input type="text" id="studentName" name="studentName" required>

  <label for="answer">3. ì•„ë˜ ë…¼ìˆ  ë¬¸ì œì— ë‹µí•˜ì„¸ìš”:</label>
  <p><strong>
    1. ê¹€í™ë„ì™€ ì‹ ìœ¤ë³µì˜ ì‘í’ˆì˜ ì°¨ì´ë¥¼ ì„œìˆ í•˜ì‹œì˜¤.<br>
    2. asdfsaf<br>
    3. asdfsdf<br>
    4. saf<br>
    5. asdfasdf
  </strong></p>

  <textarea id="answer" name="answer" rows="10" required oninput="updateCharCount()"></textarea>
  <div class="char-count" id="charCount">í˜„ì¬ ê¸€ì ìˆ˜: 0ì</div>

  <button onclick="submitForm()">ì œì¶œ</button>
</body>
</html>
